<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Falling Text</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./style/style.css">
</head>
<style>
 html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: radial-gradient(ellipse at center, #0a0a0a 0%, #000 100%);
  font-family: 'Poppins', sans-serif;
  height: 100%;
  cursor: grab;
  user-select: none;
  perspective: 1000px;
  touch-action: none;
}

.sparkle-container {
  position: fixed;
  width: 100vw;
  height: 100vh;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: 0;
}

.sparkle {
  position: absolute;
  width: 1px;
  height: 1px;
  background: transparent;
  box-shadow:
    0 -1.5px 0 0 white,
    0  1.5px 0 0 white,
    -1.5px 0 0 0 white,
    1.5px 0 0 0 white;
  opacity: 0;
  animation: sparkleBlink 4s infinite ease-in-out;
}

@keyframes sparkleBlink {
  0%, 100% { opacity: 0.2; transform: scale(0.5); }
  50%      { opacity: 1;   transform: scale(1.2); }
}

.scene {
  width: 100vw;
  height: 100vh;
  transform-style: preserve-3d;
  position: relative;
  transition: transform 0.1s linear;
  z-index: 1;
}

.falling-text {
  position: absolute;
  top: -10vh;
  font-size: 4vmin;
  color: #0ff;
  white-space: nowrap;
  animation: fall 8s linear forwards, hueShift 8s linear infinite;
  transform-style: preserve-3d;
  filter: hue-rotate(0deg);
  text-shadow: 0 0 10px #0ff, 0 0 20px #0ff, 0 0 40px #0ff;
}

.falling-icon {
  position: absolute;
  top: -10vh;
  font-size: 3.5vmin;
  animation: fall 8s linear forwards;
  transform-style: preserve-3d;
  pointer-events: none;
}

@keyframes hueShift {
  0%   { filter: hue-rotate(0deg); }
  100% { filter: hue-rotate(360deg); }
}

@keyframes fall {
  0% {
    top: -10vh;
    opacity: 0;
  }
  20% {
    opacity: 1;
  }
  100% {
    top: 120vh;
    opacity: 0;
  }
}

@media (max-width: 600px) {
  .falling-text { font-size: 5vmin; }
  .falling-icon { font-size: 4vmin; }
}

  </style>
<body>
  <div class="sparkle-container" id="sparkles"></div>
  <div class="scene" id="scene"></div>
  <audio id="sound" auto loop>
    <source src="/2027/audio.mp3" type="audio/mpeg" /> 
  </audio>

  <script >
    const scene = document.getElementById("scene");
const sparkleContainer = document.getElementById("sparkles");
const audio = document.getElementById("sound");

const texts = [
  "ChÃºc má»«ng sinh nháº­t ðŸŽ‰", 
  "Happy Birthday ðŸŽ‚", 
  "13 - 08", 
  "Huá»‡ Nguyá»…n ", 
  "ChÃºc Má»«ng Sinh Nháº­t Huá»‡ Nguyá»…n ðŸ¥³", 
  "Wishing you endless joy ðŸ’«", 
  "LuÃ´n cÆ°á»i tháº­t tÆ°Æ¡i nhÃ© ðŸ˜Š", 
  "Hope all your dreams come true âœ¨", 
  "YÃªu em nháº¥t luÃ´n Ã­ â¤ï¸",
  "I Love You 3000 â¤ï¸â¤ï¸â¤ï¸"
];

const icons = ["ðŸŽ‚", "ðŸŽ‰", "ðŸ’–", "ðŸŒŸ", "ðŸ’", "ðŸŽ", "âœ¨", "ðŸ’"];

function createFallingText() {
  const text = document.createElement("div");
  text.className = "falling-text";
  text.textContent = texts[Math.floor(Math.random() * texts.length)];
  text.style.left = `${Math.random() * window.innerWidth}px`;
  text.style.transform = `translateZ(${(Math.random() - 0.5) * 300}px)`;
  scene.appendChild(text);

  setTimeout(() => {
    if (text.parentElement) text.remove();
  }, 6000);
}

function createFallingIcon() {
  const icon = document.createElement("div");
  icon.className = "falling-icon";
  icon.textContent = icons[Math.floor(Math.random() * icons.length)];
  icon.style.left = `${Math.random() * window.innerWidth}px`;
  icon.style.transform = `translateZ(${(Math.random() - 0.5) * 300}px)`;
  scene.appendChild(icon);

  setTimeout(() => {
    if (icon.parentElement) icon.remove();
  }, 6000);
}

setInterval(() => {
  if (scene.childElementCount < 40) {
    createFallingText();
    createFallingIcon();
  }
}, 300);

// ==== PHÃT NHáº C ====

function tryPlayMusic() {
  audio.currentTime = 48;
  audio.play().then(() => {
    console.log("ðŸŽµ Tá»± Ä‘á»™ng phÃ¡t nháº¡c thÃ nh cÃ´ng.");
  }).catch((e) => {
    console.warn("ðŸŽµ Tá»± Ä‘á»™ng phÃ¡t nháº¡c bá»‹ cháº·n, chá» ngÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c...");
    waitForUserInteraction(); // fallback náº¿u bá»‹ cháº·n
  });
}

function waitForUserInteraction() {
  const playOnce = () => {
    audio.currentTime = 48;
    audio.play().then(() => {
      console.log("ðŸŽµ ÄÃ£ phÃ¡t nháº¡c sau khi ngÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c.");
    }).catch(err => {
      console.warn("KhÃ´ng thá»ƒ phÃ¡t nháº¡c:", err);
    });

    document.removeEventListener("click", playOnce);
    document.removeEventListener("touchstart", playOnce);
  };

  document.addEventListener("click", playOnce);
  document.addEventListener("touchstart", playOnce);
}

window.addEventListener("load", () => {
  const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
  if (!isMobile) {
    tryPlayMusic(); // Thá»­ tá»± Ä‘á»™ng phÃ¡t trÃªn desktop
  } else {
    waitForUserInteraction(); // LuÃ´n Ä‘á»£i ngÆ°á»i dÃ¹ng trÃªn thiáº¿t bá»‹ di Ä‘á»™ng
  }
});

// ==== XOAY SCENE KHI KÃ‰O ====

let isDragging = false;
let lastTouch = { x: 0, y: 0 };
let lastMove = 0;

document.addEventListener("mousedown", () => {
  isDragging = true;
  document.body.style.cursor = "grabbing";
});

document.addEventListener("mouseup", () => {
  isDragging = false;
  document.body.style.cursor = "grab";
});

document.addEventListener("mouseleave", () => {
  isDragging = false;
  document.body.style.cursor = "grab";
});

document.addEventListener("mousemove", (e) => {
  const now = Date.now();
  if (!isDragging || now - lastMove < 30) return;
  lastMove = now;

  const centerX = window.innerWidth / 2;
  const centerY = window.innerHeight / 2;
  const rotateY = (e.clientX - centerX) * 0.15;
  const rotateX = -(e.clientY - centerY) * 0.15;
  scene.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
});

document.addEventListener("touchstart", (e) => {
  isDragging = true;
  lastTouch.x = e.touches[0].clientX;
  lastTouch.y = e.touches[0].clientY;
}, { passive: false });

document.addEventListener("touchend", () => {
  isDragging = false;
});

document.addEventListener("touchmove", (e) => {
  if (audio.paused) {
    waitForUserInteraction();
  }
  const now = Date.now();
  if (!isDragging || now - lastMove < 30) return;
  lastMove = now;

  const touch = e.touches[0];
  const centerX = window.innerWidth / 2;
  const centerY = window.innerHeight / 2;
  const rotateY = (touch.clientX - centerX) * 0.15;
  const rotateX = -(touch.clientY - centerY) * 0.15;
  scene.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
}, { passive: false });

// ==== HIá»†U á»¨NG SPARKLES ====
function createSparkles(count = 40) {
  for (let i = 0; i < count; i++) {
    const s = document.createElement("div");
    s.className = "sparkle";
    s.style.top = `${Math.random() * 95}%`;
    s.style.left = `${Math.random() * 95}%`;
    s.style.animationDuration = `${3 + Math.random() * 3}s`;
    s.style.animationDelay = `${Math.random() * 4}s`;
    sparkleContainer.appendChild(s);
  }
}

createSparkles(40);


  </script>
</body>
</html>

